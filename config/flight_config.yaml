# Flight Computer Configuration
# This file contains all settings for the onboard flight computer

# ==========================================
# SENSOR CONFIGURATION
# ==========================================
sensors:
  # IMU (Inertial Measurement Unit) - Measures acceleration and rotation
  imu:
    model: "BMI088"           # Options: BMI088, MPU6050, ICM20948
    i2c_address: 0x68         # I2C address (check your specific module)
    sample_rate_hz: 100       # How often to read sensor (Hz)
    accel_range: 16           # Accelerometer range in Gs (2, 4, 8, 16)
    gyro_range: 2000          # Gyroscope range in deg/s (250, 500, 1000, 2000)
    enable_calibration: true  # Calibrate on startup
  
  # Magnetometer - Measures magnetic field (for orientation)
  magnetometer:
    model: "HMC5883L"         # Options: HMC5883L, QMC5883L, LIS3MDL
    i2c_address: 0x1E
    sample_rate_hz: 10        # Lower rate OK for mag (slower changing)
    declination_deg: 13.5     # Magnetic declination for your launch site
  
  # GPS - Position and velocity
  gps:
    model: "NEO-M9N"          # Options: NEO-M9N, NEO-6M, SAM-M8Q
    uart_baud: 9600           # Serial baud rate
    sample_rate_hz: 5         # Update rate (1-10 Hz typical)
    enable_sbas: true         # Satellite-Based Augmentation System
  
  # Barometer - Altitude and pressure
  barometer:
    model: "BMP388"           # Options: BMP388, BMP280, MS5611
    i2c_address: 0x77
    sample_rate_hz: 50        # Higher rate for better altitude tracking
    sea_level_pressure_pa: 101325  # Update for launch day conditions
    oversampling: 8           # Higher = more accurate but slower

# ==========================================
# COMMUNICATION CONFIGURATION
# ==========================================
lora:
  frequency_mhz: 915.0        # 915 MHz (US) or 868 MHz (EU)
  bandwidth_khz: 125          # Options: 125, 250, 500
  spreading_factor: 7         # 7-12 (higher = longer range, slower)
  coding_rate: 5              # 5-8 (error correction)
  tx_power_dbm: 20            # Transmit power (2-20 dBm)
  preamble_length: 8
  sync_word: 0x12             # Must match ground station
  packet_size_bytes: 64       # Fixed packet size
  transmit_interval_ms: 100   # Send telemetry every 100ms

# ==========================================
# DATA LOGGING
# ==========================================
data_logging:
  enable_sd_card: true        # Log to SD card (backup)
  sd_cs_pin: 10               # Chip select pin for SD card
  log_interval_ms: 50         # Write to SD every 50ms
  buffer_size: 512            # Buffer before writing to SD
  filename_prefix: "FLIGHT_"  # Log files: FLIGHT_2025-11-03_14-30-00.csv

# ==========================================
# FLIGHT STATE MACHINE
# ==========================================
flight_states:
  # Thresholds for detecting flight phases
  launch_detect_accel_g: 3.0       # Launch when accel > 3G
  apogee_detect_velocity_ms: -5.0  # Apogee when velocity < -5 m/s
  landing_detect_accel_g: 0.5      # Landed when stable near 1G
  landing_stable_time_s: 3.0       # Must be stable for 3 seconds
  
  # Safety parameters
  max_altitude_m: 10000            # Abort if we exceed this (sanity check)
  min_flight_time_s: 1.0           # Min time in boost before apogee

# ==========================================
# HARDWARE PINS (Arduino/ESP32)
# ==========================================
pins:
  # I2C pins
  sda_pin: 21
  scl_pin: 22
  
  # LoRa SPI pins
  lora_cs_pin: 5
  lora_rst_pin: 14
  lora_dio0_pin: 2
  
  # Status LED
  led_pin: 13
  
  # SD Card
  sd_cs_pin: 10
  
  # GPS UART
  gps_rx_pin: 16
  gps_tx_pin: 17

# ==========================================
# SYSTEM SETTINGS
# ==========================================
system:
  loop_rate_hz: 100           # Main loop frequency
  enable_watchdog: true       # Reset if system hangs
  watchdog_timeout_s: 5
  enable_debug_serial: true   # Print debug messages via USB
  serial_baud: 115200
