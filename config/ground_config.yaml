# Ground Station Configuration
# This file contains all settings for the ground data receiving system
# Hardware: Ground Feather M4 connected to laptop via USB Serial

# ==========================================
# SERIAL CONNECTION (Ground Feather M4)
# ==========================================
serial:
  # USB Serial port (Ground Feather M4 â†’ Laptop)
  serial_port: "/dev/cu.usbmodem14201"  # macOS: /dev/cu.usbmodem*, Linux: /dev/ttyACM*, Windows: COM*
  baud_rate: 115200
  timeout_s: 1.0
  
  # Auto-reconnect if connection lost
  auto_reconnect: true
  reconnect_delay_s: 2

# ==========================================
# DATA LOGGING CONFIGURATION
# ==========================================
data_logging:
  # Output format
  format: "csv"                   # Options: "csv" or "json"
  
  # CSV settings
  csv:
    delimiter: ","
    include_header: true
    float_precision: 6            # Decimal places for floating point
  
  # File naming
  output_directory: "./data/flights"
  filename_format: "%Y-%m-%d_%H-%M-%S"  # Python strftime format
  auto_create_directory: true
  
  # Backup/redundancy
  enable_raw_backup: true         # Save raw packets to separate file
  raw_directory: "./data/raw"
  
  # Real-time logging
  flush_interval_s: 1.0           # Write to disk every 1 second
  buffer_size: 100                # Buffer up to 100 packets

# ==========================================
# TELEMETRY FIELDS
# ==========================================
# Define expected telemetry packet structure
telemetry:
  fields:
    - name: "timestamp"
      type: "float"
      unit: "seconds"
      description: "Flight computer timestamp"
    
    - name: "altitude"
      type: "float"
      unit: "meters"
      description: "Altitude above sea level"
    
    - name: "pressure"
      type: "float"
      unit: "pascals"
      description: "Atmospheric pressure"
    
    - name: "temperature"
      type: "float"
      unit: "celsius"
      description: "Ambient temperature"
    
    - name: "accel_x"
      type: "float"
      unit: "m/s^2"
      description: "X-axis acceleration"
    
    - name: "accel_y"
      type: "float"
      unit: "m/s^2"
      description: "Y-axis acceleration"
    
    - name: "accel_z"
      type: "float"
      unit: "m/s^2"
      description: "Z-axis acceleration"
    
    - name: "gyro_x"
      type: "float"
      unit: "deg/s"
      description: "X-axis rotation rate"
    
    - name: "gyro_y"
      type: "float"
      unit: "deg/s"
      description: "Y-axis rotation rate"
    
    - name: "gyro_z"
      type: "float"
      unit: "deg/s"
      description: "Z-axis rotation rate"
    
    - name: "mag_x"
      type: "float"
      unit: "uT"
      description: "X-axis magnetic field"
    
    - name: "mag_y"
      type: "float"
      unit: "uT"
      description: "Y-axis magnetic field"
    
    - name: "mag_z"
      type: "float"
      unit: "uT"
      description: "Z-axis magnetic field"
    
    - name: "gps_lat"
      type: "float"
      unit: "degrees"
      description: "GPS latitude"
    
    - name: "gps_lon"
      type: "float"
      unit: "degrees"
      description: "GPS longitude"
    
    - name: "gps_alt"
      type: "float"
      unit: "meters"
      description: "GPS altitude"
    
    - name: "state"
      type: "string"
      unit: "enum"
      description: "Flight state (PAD, BOOST, COAST, DESCENT, LANDED)"

# ==========================================
# WEB INTERFACE
# ==========================================
web:
  host: "0.0.0.0"                 # Listen on all interfaces
  port: 5000                      # http://localhost:5000
  debug: false                    # Set to true for development

# ==========================================
# DISPLAY/CONSOLE OUTPUT
# ==========================================
display:
  enable_console_output: true     # Print telemetry to terminal
  console_format: "compact"       # Options: "compact", "verbose", "minimal"

# ==========================================
# DATA VALIDATION
# ==========================================
validation:
  enable_checksum: true           # Verify packet checksums
  enable_range_check: true        # Check if values are reasonable
  
  # Reasonable ranges (reject packets outside these)
  ranges:
    altitude: [-100, 50000]       # meters
    pressure: [10000, 110000]     # pascals
    temperature: [-50, 100]       # celsius
    accel: [-200, 200]            # m/s^2
    gyro: [-2000, 2000]           # deg/s

# ==========================================
# SYSTEM SETTINGS
# ==========================================
system:
  enable_logging: true            # Log ground station events
  log_level: "INFO"               # DEBUG, INFO, WARNING, ERROR
  log_file: "./ground_station.log"
  
  # Performance
  max_packet_rate_hz: 50          # Maximum expected packet rate
  queue_size: 1000                # Packet buffer size
